# 计费方式 {#concept_y3m_g5n_vdb .concept}

日志服务提供**按量计费**的收费方式，每个月有一定的免费额度。本文档详细介绍日志服务产品的**计费方式**、**扣费方式**和**计费示例**。

## 计费说明 {#section_ynw_j5n_vdb .section}

-   **扣费周期为天**：每天为您提供账单，按您当天的资源使用量进行收费。
-   **免费额度的周期为月**，月底会清零。如您当月资源使用量在免费额度内，则不收费；如超出免费额度，则对超出部分收费。
-   **日志投递**功能不收取费用，您可以免费将日志数据投递至OSS进行存储分析。

## 价格和免费额度 {#section_xpt_tvs_2fb .section}

资源计费项及其单价见下表。

|资源计费项|价格|免费额度（每月）|
|:----|:-|:-------|
|[读写流量（压缩后）](#)|0.045 $/GB|500 MB|
|[存储空间](#)|0.002875 $/GB\*天|500 MB|
|[索引流量](#)|0.0875 $/GB|500 MB|
|**其他计费项**（以下计费项为了限制资源滥用，默认非常低廉）|
|[活跃Shard租用](#)|0.01 $/天|31 个 \* 天|
|[读写次数](#)|0.03 $/百万次|1,000,000次|
|[外网读取流量](#)|0.2 美元/GB|无|

## 读写流量（压缩后） {#section_wfg_n5s_2fb .section}

-   读写流量根据**压缩后**的传输流量计算，通常情况下压缩率为10%~20%。
-   读写流量也包括通流式消费接口产生读取流量，一般通过API/SDK、消费组SDK等进行操作。API/SDK写入时需要手动开启压缩。
-   对数据进行基于索引的查询、分析产生的流量免收读写流量费。例如通过控制台进行日志查询分析、报表和告警等流量不收费。

**说明：** 在日志服务的控制台中，**日志消费**下的**预览**功能也会产生微量流式消费流量。

**示例**：原始日志为 10GB，实际压缩后大小为 1.5GB，则以 1.5GB 计费。

## 存储空间 {#section_ezf_45s_2fb .section}

存储空间为压缩后原始数据量与索引数据量之和。

**示例**：每天 1GB 数据，压缩后为 200MB。其中 10% 的数据开启索引，大小为 100MB。存储周期为 30 天，则30 天后累计最大存储量为 30 ×（100+200）= 9 GB，一天存储最大收费为 0.002875 × 9 ≈ 0.026美元。

## 索引流量 {#section_gxd_p5s_2fb .section}

-   索引默认为关闭状态，开启索引后产生索引流量才会计费。
-   索引流量根据实际索引字段进行计算，在写入时一次性收取费用。
-   对同时建全文索引（FullText）、键值索引（KeyValue）的字段，只计算一次流量。
-   建立索引后占用存储空间，所以会产生存储空间费用。

**示例**：10G日志中有 10% 字段需要查询，则流量只计算该部分，即产生索引流量费用0.0875美元。

## 活跃Shard租用 {#section_xbr_p5s_2fb .section}

Shard 租用只统计当前状态为readwrite的Shard数量。已经被合并或分裂的Shard 不收取租用费。

一般每个Shard可以支持430 GB/天的数据写入量。

**示例**：目前有 3 个 Shard，1 个 Shard 的状态为读写，另外 2 个 Shard 已经被合并为只读，则当前只收取 1 个 Shard 的租赁费0.01美元。

## 读写次数 {#section_zxh_q5s_2fb .section}

日志写入日志服务的次数，由您的日志产生速度决定。后台实现机制会尽量减少读写次数。

**示例**：使用 Logtail 自动做批量发送，产生 100万次写入，共计0.03 美元。

## 外网读取流量 {#section_nwv_q5s_2fb .section}

日志服务收集上来的日志数据被被外网程序读取消费所产生的数据流量。

**示例**：2G日志服务数据被投递至非阿里云产品，产生外网读取流量0.4美元。

## 扣费与欠费 {#section_l45_r5n_vdb .section}

-   账单出账时间通常在当前计费周期结束后4小时内。系统会自动从您账户余额中扣除账单金额，账户余额不足时，转为欠费状态。

-   如您欠费时间超过24小时，则您的服务将自动停止，而您所占用的存储空间的这部分资源仍会继续扣费， 因此欠费余额会累计。建议您在欠费后24H内补足欠费，以免服务停止，对您的业务造成损失。

-   欠费停服后，请于6天内及时充值补足欠费，服务会自动恢复。欠费超过7天，将视为您主动放弃服务，Project空间将被回收，数据会被清理且不可恢复。


## 计费示例 {#section_zfy_s5n_vdb .section}

## 案例1：免费额度 {#section_hq3_wb1_d2b .section}

用户有3台服务器，一台服务器每天产生5MB日志数据，用户希望用程序对日志进行以下处理。

1.  实时查询，创建仪表盘进行在线运维。
2.  通过Java程序实时订阅日志处理。
3.  将日志投递至OSS。

**收费明细**：

-   资源：创建1个Logstore（1个Shard），单月共计31 个，免费额度内。
-   读写流量：每天读写流量 15/5（压缩后数据）× 2 （读+写） = 6 MB（压缩后），单月累计 6 × 31（天） = 183 MB，免费额度内。
-   索引流量：15（原始数据） × 31（天）= 465 MB，免费额度内。
-   读写次数：一个月<100W次，免费额度内。

**用户每月不需要任何支出，就可免费使用日志服务进行线上日志分析与处理。**

## **案例2：实时计算+离线计算（Lamdba Architecture）** {#section_vk4_1c1_d2b .section}

网站一天有 1 亿 API 请求，一个请求对应 200 字节日志，一天日志数量为 20GB，高峰时流量为均值的 5 倍，则峰值流量为 1.16MB/S （< 5MB/S）。这些日志在日志服务保存2天，每天被读取一遍做实时计算，并导入到 OSS 中进行离线计算（Hive/Spark）。

**收费明细**：

-   活跃Shard租用：预留一个 Shard，0.01 美元/天。
-   读写次数：使用 Logtail 自动做批量发送，产生 100W次写入，0.03 美元。
-   读写流量：
    -   写入流量为 20GB，假设压缩率为 10%，实际流量为 2GB，2 × 0.045 = 0.09 美元。
    -   实时计算读取流量和写入流量相同，0.09 美元。
-   存储空间：存储大小为2GB × 2（Day）=4 GB，一天存储费用为 4 × 0.002875 = 0.0115 美元。
-   导入 OSS 部分免费。

**一天的费用最多为 0.01 + 0.03+ 0.09 × 2 + 0.115 = 0.335 美元。**

## 案例3：日志在线查询分析 {#section_hhx_cc1_d2b .section}

服务一天有 100W API 访问，一个请求对应 200 字节日志，一天的数据量为 200MB，保存最近 30 天的数据进行查询。

**收费明细**：

-   活跃Shard租用：预留一个 Shard，0.01 美元/天。
-   读写次数：使用 Logtail 自动做批量发送，产生 100W次写入，0.03 美元。
-   读写流量：写入流量为200MB，压缩后0.05G，则一天的读写流量费用为0.05 × 0.045 = 0.00225 美元。
-   索引流量：一天索引费用为 0.2 × 0.0875 = 0.0175 美元。
-   存储空间：200MB + 50MB（原始日志压缩）= 250MB，存储峰值为 250 × 30 = 7.5GB， 一天的存储费用为 7.5 × 0.002875 = 0.022 美元。

**一天的费用最多为 0.01 + 0.03 + 0.00225 + 0.0175 + 0.22 = 0.08175 美元。**

